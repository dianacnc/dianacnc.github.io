---
cssname: work
layout: work
activeworks: active
logo: logo.png
title: "Статья: \"Актуальные вопросы эксплуатации станков с ЧПУ - подготовка управляющих программ\""
tmb: Prepare.png
description: "В статье проведен анализ различных вариантов подготовки управляющих программ для станков с ЧПУ, использование универсальных вычислительных средств (персональных компьютеров, ноутбуков, планшетов), интерактивное написание программы в режиме ручного управления, использование шаблонов для специфических методов обработки, использование конверторов, преобразующих управляющие программы, разработанные для других систем ЧПУ, использование конверторов из файлов растровой либо векторной графики"
---
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117381769-1"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117381769-1');
  </script>
</head> 
<p>Статья была написана в 2018 году и опубликована в журнале <a href="http://panor.ru/magazines/glavnyy-mekhanik.html">"Главный механик".</a>
Статья посвящена одному из наиболее актуальных вопросов эксплуатации станков с ЧПУ – подготовке управляющих программ.</p>
<!--content-->
<div class="row">
  <div class="pull-right">
    <a href="/static/pdf/article-03-2018.pdf">Оригинал статьи</a>
  </div>
</div>
<p>
Настоящая статья посвящена одному из наиболее актуальных вопросов эксплуатации станков с ЧПУ – подготовке управляющих программ. К настоящему времени сложилась
многовариантная система написания программ для станков с программным управлением:
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> использование систем автоматизированного проектирования;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> использование встроенных редакторов управляющих программ;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> использование универсальных вычислительных средств (персональных компьютеров,
ноутбуков, планшетов);
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> интерактивное написание программы в режиме ручного управления;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> использование шаблонов для специфических методов обработки;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> использование конверторов, преобразующих управляющие программы, разработанные
для других систем ЧПУ;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> использование конверторов из файлов растровой либо векторной графики.
</p>
<p>
Естественно, наиболее эффективным и перспективным вариантом является использование
систем автоматизированного проектирования. Единственным недостатком этого способа
подготовки управляющих программ является необходимость определённых финансовых затрат,
в первую очередь на приобретение специальных программных модулей и содержание штата
программистов-технологов. Однако этот «недостаток» в полной мере компенсируется
неоспоримыми достоинствами – скоростью и точностью подготовки, непрерывностью процесса
разработка-производство, широчайшими возможностями редактирования, документирования,
архивирования, систематизации. Не вдаваясь в тонкости автоматизированной подготовки
управляющих программ, следует пояснить общий принцип, что потребуется для более точного
понимания материала, изложенного ниже. Чаще всего любой участок общего контура
механической обработки (прямая или наклонная линия, дуга, окружность и т.д.) разбивается на
отдельные короткие отрезки линейной интерполяции (сплайны), что значительно упрощает
алгоритм подготовки программы. Правда при этом значительно вырастает число кадров
управляющей программы, но при современных вычислительных возможностях это не
проблема.
</p>
<p>
На Рисунке 1 показан самый быстрый путь от разработчика к конечному продукту: система
автоматизированного проектирования (а), управляющая программа (б), станок (в), деталь (г).
Следует обратить внимание, что на Рисунке 1а показан фрагмент окна диалога одной из систем
автоматизированного проектирования, на Рисунке 1б – два окна построцессора (исходное и
итоговое), преобразующего формат системы проектирования в формат СЧПУ.
</p>
<p>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/SAPR.png">
  <p style="padding-top: 10px;"><small>а) Автоматизированное проектирование.</small></p>
</div>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/Soft.png">
  <p style="padding-top: 10px;"><small>б) Управляющая программа.</small></p>
</div>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/stanok1.png">
  <img src="/static/img/works/article-03-2018/stanok.png">
  <p style="padding-top: 10px;"><small>в) Станок.</small></p>
</div>
<div>
   <div class="work-img">
   <img src="/static/img/works/article-03-2018/detal1.png">
   <img src="/static/img/works/article-03-2018/detal.png">
   <p style="padding-top: 10px;"><small>г) Деталь.</small></p>
   <p style="padding-top: 10px;"><strong>Рисунок 1. Подготовка управляющих программ с использованием САПР.</strong></p>
   </div>
</div><br>
</p>
<div class="col-lg-0 col-md-0 col-sm-0">
    <h3><strong class="di-color">      </strong></h3>
</div>
<p>До широкого использования САПР основным вариантом подготовки управляющих программ
было использование встроенных редакторов. Этот способ до сих пор используется на
некоторых малых предприятиях и индивидуальными предпринимателями, когда применение
автоматизированной подготовки экономически неоправданно или вообще невозможно.
Характеристики редакторов различных систем ЧПУ отличаются как составом полей, так и
наличием сервисных функций. На Рисунке 2 показана копия экрана встроенного редактора
управляющих программ системы числового программного управления «ДиаНа-CNC-СМ»
(сенсорный монитор), а на Рисунке 3 – фрагмент сервисной функции блочного редактирования.
</p>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/editor.png">
  <p style="padding-top: 10px;"><small>Рисунок 2. Встроенный редактор управляющих программ СЧПУ «ДиаНа-CNC»</small></p>
</div>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/EditBlock.png">
  <p style="padding-top: 10px;"><small>Рисунок 3. Функция блочного редактирования встроенного редактора СЧПУ «ДиаНа-CNC».</small></p>
</div>
<p>
С точки зрения общего алгоритма подготовки управляющих программ использование
универсальных вычислительных средств является частным случаем использования
встроенных редакторов, с той лишь разницей, что возможности универсальных редакторов
зачастую намного превосходят возможности встроенных редакторов СЧПУ (блочное
редактирование, поиск с заменой, отмена и повторное исполнение большого числа действий и
т.д.). Для переноса управляющей программы в память СЧПУ используют, например, разъём
USB (Рисунок 4а), к которому подключаются стандартные накопители Flash USB (Рисунок 4б)
или адаптер Wi-Fi для реализации беспроводной технологии (Рисунок 4в).
</p>
 <div class="work-img">
  <img src="/static/img/works/article-03-2018/PortUSB.png">
  <img src="/static/img/works/article-03-2018/PortUSB1.png">
  <p style="padding-top: 10px;"><small>а) Разъём для подключения USB-устройств.</small></p>
 </div>
 <div class="work-img">
     <img src="/static/img/works/article-03-2018/USB.png">
     <p style="padding-top: 10px;"><small>б) Накопитель Flash USB.</small></p>
 </div>
 <div class="work-img">
  <img src="/static/img/works/article-03-2018/wifi.png">
  <p style="padding-top: 10px;"><small>в) Адаптер Wi-Fi.</small></p>
  <p style="padding-top: 10px;"><strong>Рисунок 4. Варианты переноса управляющих программ в память СЧПУ «ДиаНа-CNC».</strong></p>
 </div>
<p>
Более эффективным, по сравнению с использованием встроенного или универсального
редакторов (с точки зрения автора), является интерактивное написание управляющей
программы в режиме ручного управления. Правда следует отметить, что не все системы ЧПУ
поддерживают эту функцию. Этот способ подготовки управляющей программы предполагает
хорошее знание технологии обработки металлов (или другого исходного материала) и умение
читать чертежи.<br>
На Рисунке 5 показано окно режима РУЧНОЕ УПРАВЛЕНИЕ системы ЧПУ «ДиаНа-CNC».
Общий алгоритм подготовки управляющей программы при этом варианте следующий:
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> включить функцию запоминания кадров (1);
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> используя стандартные вспомогательные и подготовительные функции и размерные
перемещения последовательно выполнить обработку заготовки;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> при необходимости отменить один или несколько последних кадров (2);
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> после получения готовой детали записать все проверенные и неотменённые кадры как
готовую управляющую программу (3).
</p>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/Prepare.png">
  <p style="padding-top: 10px;"><small>Рисунок 5. Интерактивная подготовка управляющих программ.</small></p>
</div>
<p>
Отдельно следует остановиться на использовании шаблонов при подготовке управляющих
программ. При этом вопрос использования шаблонов имеет два самостоятельных аспекта. О
втором аспекте будет сказано ниже, здесь же остановимся на первом аспекте.<br>
Сам термин «шаблон» не является общепринятым, поэтому требуется небольшое пояснение.
В ГОСТ 20999-83 существует понятие «постоянный цикл» (Таблица 4, Таблица 6). В принципе
«шаблон» и «постоянный цикл» - понятия идентичные, однако шаблон имеет более широкую
область применения. Шаблон может использоваться как для подготовки целой управляющей
программы (например, расточка заданного числа отверстий фланца заданной формы), так и для
вставки в неё постоянных циклов (например, глубокое сверление).<br>
На Рисунке 6 показано диалоговое окно шаблона ГЛУБОКОЕ СВЕРЛЕНИЕ системы ЧПУ
«ДиаНа-CNC» (нижний индекс А означает абсолютный размер, О - относительный).
</p>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/Deep.png">
  <p style="padding-top: 10px;"><small>Рисунок 6. Шаблон ГЛУБОКОЕ СВЕРЛЕНИЕ.</small></p>
</div>
<p>
Использование конверторов, преобразующих управляющие программы, разработанные для
других систем ЧПУ целесообразно в следующих случаях:
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> когда проведена модернизация системы управления и имеется большой задел
управляющих программ, разработанных для «старой» системы управления (это особенно
актуально тогда, когда отсутствует полная информация по детали, например, деталь делается
давно, чертежи и связь с разработчиками потеряны);
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> когда на предприятии есть несколько одинаковых станков с различными системами
управления (например, один из самых распространённых токарных станков 16А20 имеет как
минимум пять модификаций, отличающихся системой ЧПУ);
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> когда эксплуатируемая на предприятии САПР не имеет постпроцессоры для некоторых
станков (например, САПР куплена несколько лет назад и не поддерживает системы управления
станков, купленных после неё).
</p>
<p>
В определённых случаях могут использоваться такие экзотические, на первый взгляд,
способы подготовки управляющих программ, как конверторы из файлов растровой либо
векторной графики. Особенно это актуально для областей применения, когда высокая точность
обработки не имеет принципиального значения (например, деревообработка, гравировка).<br>
Классическим примером файла растровой графики является файл с расширением .BMP
(Bitmap Picture). Практически любой современный графический редактор может работать с
этим типом файлов (либо имеет возможность экспортировать/импортировать такие файлы).
Простой конвертор позволяет получить из файла *.BMP готовую управляющую программу.
Например, необходимо изготовить деталь, представляющую собой металлическую пластину, на
которой с помощью фрезы определённого радиуса следует сделать какую-либо надпись. С
помощью стандартного графического редактора Paint семейства операционных систем
Windows пользователь имеет возможность подготовить рисунок любой формы (например см.
Рисунок 7а), после чего конвертор преобразует формат растровой графики в
последовательность вспомогательных функций, подготовительных функций и размерных
перемещений (например см. Рисунок 7б). Технологу остаётся только выбрать скорость
вращения шпинделя (вместо Sxxx поставить, например, S500) и подачу (вместо Fxxx поставить,
например, F70). Для удобства подготовлены соответствующие строки с заголовками
комментариев (например ;Архивный номер).
</p>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/File.png">
  <p style="padding-top: 10px;"><small>а) Исходный файл.</small></p>
</div>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/FileSoft.png">
  <p style="padding-top: 10px;"><small>б) Файл управляющей программы.</small></p>
  <p style="padding-top: 10px;"><strong>Рисунок 1. Подготовка управляющих программ с использованием САПР.</strong></p>
</div>
<p>
Гораздо большими возможностями обладают файлы векторной графики, поскольку
содержат не только собственно рисунок, но и порядок его формирования. Большинство
современных графических редакторов поддерживает векторную графику. Более того
существует специальный формат семейства операционных систем Windows .WMF (Windows
meta file), который призван обеспечить, в том числе, переносимость файлов векторной графики
между различными приложениями.<br>
Порядок подготовки управляющей программы для файлов векторной графики не отличается
от порядка для растровой графики. На Рисунке 8а показан исходный файл, на Рисунке 8б файл
управляющей программы.
</p>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/File2.png">
  <p style="padding-top: 10px;"><small>а) Исходный файл.</small></p>
</div>
<div class="work-img">
  <img src="/static/img/works/article-03-2018/File3.png">
  <p style="padding-top: 10px;"><small>б) Файл управляющей программы.</small></p>
   <p style="padding-top: 10px;"><strong>Рисунок 8. Преобразование файлов векторной графики.</strong></p>
</div>
<p>
В заключении хотелось бы, пользуясь возможностями авторитетного периодического
издания, обратиться к Агентству стратегических инициатив со следующим предложением.<br>
В последние несколько лет многократно возросли закупки импортных станков. Вместе с тем
отечественное станкостроение переживает далеко не самые лучшие времена. При этом
производство станков (по терминологии советской школы «производство средств
производства») в огромной степени обеспечивает экономическую (а в конечном счёте и
политическую) независимость государства. Первым и очень существенным шагом на пути
возрождения отечественного станкостроения могла бы стать разработка единого стандарта на
системы числового программного управления (90% технологических возможностей станка
определяется составом и возможностями СЧПУ). В настоящее время поддерживается большое
число стандартов, имеющих то или иное отношение к СЧПУ, но они практически не работают,
поскольку, с одной стороны, в значительной степени устарели и, с другой стороны, не имеют
консолидирующего начала.<br>
В этом едином документе следует прописать обязательные требования к:
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> формату управляющей программы;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> входным/выходным характеристикам каналов электроавтоматики;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> входным/выходным характеристикам каналов сервоуправления;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> входным/выходным характеристикам каналов управления шаговыми двигателями;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> уровням, скоростям, очерёдности и последовательности передачи и приёма, формату
управляющих и информационных слов протоколов промышленных сетей;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> алгоритму разработки и описания в эксплуатационной документации шаблонов;
</p>
<p>
<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> техническим характеристикам и составу программного обеспечения промышленных
компьютеров.
</p>
<p>
При выработке требований к управляющим программам целесообразно отказаться от
постоянных циклов как таковых и ограничиться минимальным необходимым набором
подготовительных функций. Дело в том, что переносимость управляющих программ в первую
очередь ограничивается кодированием подготовительных функций (например, каждый
производитель СЧПУ по своему использует как нумерацию постоянных циклов, так и адреса
слов и алгоритмы их использования). Более того, даже кодирование круговой интерполяции в
ГОСТ 20999-83 (основной ГОСТ по кодированию управляющих программ) однозначно не
определено (несмотря на то, что круговой интерполяции посвящён отдельный раздел 4.3 и
обязательное Приложение No 3). Речь здесь в первую очередь идёт о кодировании точки центра
окружности.<br>
Вместе с тем, как было сказано выше, системы автоматизированного проектирования при
генерации управляющих программ не используют ни постоянные циклы, ни круговую
интерполяцию. Специфические возможности станка могут быть учтены в шаблонах.<br>
Целью разработки единого стандарта по СЧПУ должны стать полная переносимость
управляющих программ и полная взаимозаменяемость блоков управления электроавтоматикой,
блоков управления приводами, узлов и элементов промышленных сетей, промышленных
компьютеров. Можно себе представить, насколько практическое внедрение такого стандарта
облегчит работу программистам-технологам, операторам, наладчикам, ремонтникам. Например,
в критической ситуации можно будет просто снять промышленный компьютер с одного станка
и поставить его на другой (в настоящее время такое возможно только применительно к станкам
одного типа и одной модификации, да и то не всегда).
</p>